<!DOCTYPE html>
<html>
<head>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="csrf-token" content="{{ csrf_token() }}">
<link rel="icon" href="{{ url_for('static', filename='logo.png') }}" sizes="32x32" type="image/png">
<link rel="icon" href="{{ url_for('static', filename='logo.png') }}" sizes="192x192" type="image/png">
<link rel="apple-touch-icon" href="{{ url_for('static', filename='logo.png') }}">
<title>Neurochat</title>
</head>
<body>
    <div class="nav">
            <h1>Neurochat</h1>
        <div class="login">
            <h1 id="signin"><a href="javascript:void(0);" onclick="openPopup('{{ url_for('auth.login') }}')">Log In</a></h1>
            <h1 id="slash">/</h1>
            <h1 id="signup"><a href="javascript:void(0);" onclick="openPopup('{{ url_for('auth.signup') }}')">Register</a></h1>
        </div>
    </div>
<div class="guest">
    <label for="kofi-toggle" class="donate">Support Us!</label>
        <input type="checkbox" id="kofi-toggle" hidden>
        <!-- Popup modal -->
        <div class="popup">
            <div class="popup-content">
            <!-- Close button -->
            <label for="kofi-toggle" class="close-btn">&times;</label>
            <!-- Ko-fi iframe -->
            <iframe id="kofiframe" 
            src="https://ko-fi.com/neurochat/?hidefeed=true&widget=true&embed=true&preview=true"
            style="border:none;width:100%;background:#f9f9f9;" 
            height="580" title="neurochat">
            </iframe>
            </div>
        </div>
    
    <div id="modalOverlay" class="modal">
        <div class="modal-content">
          <span class="close-button" onclick="closePopup()">&times;</span>
          <iframe id="modalIframe" src="" frameborder="0" style="width:100%; height:100%; border:none;"></iframe>
        </div>
    </div>
        
    <div class="centered">
        <textarea id="messageInput" maxlength="2000" placeholder="What's on your mind?" disabled></textarea>
        <p id="warning">Neurochat's here to listen, not to diagnose. For serious help, talk to a licensed professional.</p>
        
    </div>
    
    <div class="container">
        <div class="window" id="chatWindow">
            <!-- AI welcome message will appear here automatically -->
        </div>
        <div class="typing-indicator" id="typingIndicator" style="display: none;">
            <div class="typing-bubble">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </div>
    
    <!-- Load JavaScript at the end of body -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    
    <script>
    // Guest expired message display
    function showGuestExpired() {
        // Disable chat input
        document.getElementById('messageInput').disabled = true;
        document.getElementById('messageInput').placeholder = 'Create account to continue chatting';
        
        // Add message to chat that time has expired
        addMessage('ai', "‚è∞ Your 15-minute guest session has expired. Please create a free account to continue chatting with Neurochat!");
    }
    </script>
</div>
    </body>
</html>